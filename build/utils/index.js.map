{"version":3,"sources":["../../app/utils/index.js"],"names":["getRandomId","generateCodigo","getRandomUppercase","length","text","letters","i","charAt","Math","floor","random","getRandomNumber","generateFullCodigo","codigo","prefixo","substring","numero","sufixo","trim","retorno","dv","multiplicadores","soma","Error","zeros","diferenca","resto","toString"],"mappings":"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","file":"index.js","sourcesContent":["function getRandomUppercase(length = 1) {\n  let text = '';\n  const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  for (let i = 0; i < length; i += 1) {\n    text += letters.charAt(Math.floor(Math.random() * letters.length));\n  }\n  return text;\n}\n\nfunction getRandomNumber(length = 1) {\n  return Math.floor(10 ** (length - 1) + Math.random() * 9 * 10 ** (length - 1)); // removed the 0 possibility was causing length problem\n  // return Math.floor(Math.random() * 10 ** length);\n}\n\nexport function getRandomId(length = 1) {\n  let text = '';\n  const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  for (let i = 0; i < length; i += 1) {\n    text += letters.charAt(Math.floor(Math.random() * letters.length));\n  }\n  return text;\n}\n\nfunction generateFullCodigo(codigo) {\n  const prefixo = codigo.substring(0, 2);\n  const numero = codigo.substring(2, 10);\n  const sufixo = codigo.substring(10).trim();\n  let retorno = numero;\n  let dv;\n  const multiplicadores = [8, 6, 4, 2, 3, 5, 9, 7];\n  let soma = 0;\n  // Preenche número com 0 à esquerda\n  if (codigo.length < 12) {\n    throw new Error('could not calculate codigo');\n  } else if (numero.length < 8 && codigo.length === 12) {\n    let zeros = '';\n    const diferenca = 8 - numero.length;\n    for (let i = 0; i < diferenca; i += 1) {\n      zeros += '0';\n    }\n    retorno = zeros + numero;\n  } else {\n    retorno = numero.substring(0, 8);\n  }\n  for (let i = 0; i < 8; i += 1) {\n    soma += retorno.substring(i, i + 1) * multiplicadores[i];\n  }\n  const resto = soma % 11;\n  if (resto === 0) {\n    dv = '5';\n  } else if (resto === 1) {\n    dv = '0';\n  } else {\n    dv = (11 - resto).toString();\n  }\n  retorno += dv;\n  retorno = prefixo + retorno + sufixo;\n  return retorno;\n}\n\nexport function generateCodigo() {\n  return generateFullCodigo(`${getRandomUppercase(2)}${getRandomNumber(8)}${getRandomUppercase(2)}`);\n}\n"]}